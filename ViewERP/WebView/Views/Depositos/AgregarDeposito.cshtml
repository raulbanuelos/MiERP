
@{
    ViewBag.Title = "AgregarDeposito";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="row">
    <div class="col-lg-12">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h4 class="panel-title">Depositos</h4>
            </div>
            <div class="panel-body pb-0">
                <div class="bs-callout bs-callout-info mt0">
                    <p>Por favor ingrese la información requerida</p>
                </div>

                <div class="form-horizontal group-border stripped">
                    <!--Fecha-->
                    <div class="form-group">
                        <label class="col-lg-1 col-md-1 control-label" for="">Fecha</label>
                        <div class="col-lg-10 col-md-9">
                            <div class="input-group">
                                <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                                <input id="txtFecha" type="text" class="form-control" placeholder="dd-mm-yyyy">
                            </div>
                        </div>
                    </div>

                    <!--Importe-->
                    <div class="form-group">
                        <label class="col-lg-1 col-md-1 control-label" for="">Importe</label>
                        <div class="col-lg-10 col-md-9">
                            <div class="input-group">
                                <span class="input-group-addon"><i class="fa fa-dollar"></i></span>
                                <input type="text" class="form-control" id="inlineFormInputGroup" placeholder="Importe">
                            </div>
                        </div>
                    </div>

                    <!--Banco-->
                    <div class="form-group">
                        <label class="col-lg-1 col-md-1 control-label" for="">Importe</label>
                        <div class="col-lg-10 col-md-9">
                            <div class="input-group">
                                <select class="form-control" id="cboBanco">
                                    <option>BANCOMER</option>
                                    <option>BANAMEX</option>
                                    <option>SANTANDER</option>
                                    <option>BANORTE</option>
                                    <option>SANTANDER</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!--Descripcion-->
                    <div class="form-group">
                        <label class="col-lg-1 col-md-1 control-label" for="">Descripción</label>
                        <div class="col-lg-10 col-md-9">
                            <div class="input-group">
                                <span class="input-group-addon"><i class="fa fa-info"></i></span>
                                <input type="text" class="form-control" id="txtDescripcion" placeholder="Descripción">
                            </div>
                        </div>
                    </div>

                    <!--File-->
                    <div class="form-group">
                        <label class="col-lg-1 col-md-1 control-label" for="">Ficha de depósito</label>
                        <div class="col-lg-10 col-md-9">
                            <div class="input-group">
                                <input type="file" class="form-control" id="customFiles" placeholder="Descripción">
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="col-md-offset-2 col-md-10">
                            <button class="btn btn-success" onclick="guardarDeposito()">Guardar cambios</button>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">

    function guardarDeposito() {
        var _monto = $("#inlineFormInputGroup").val();
        var _fecha = $("#txtFecha").val();
        var _banco = $("#cboBanco").val();
        var _descripcion = $("#txtDescripcion").val();

        var fd = new FormData();

        fd.append('file', $("#customFiles")[0].files[0]);
        fd.append('monto', _monto);
        fd.append('fecha', _fecha);
        fd.append('banco', _banco);
        fd.append('descripcion', _descripcion);

        var urlSave = '@Url.Action("GuardarDeposito", "Depositos")';
        $.ajax({
            type: "POST",
            url: urlSave,
            data: fd,
            contentType: false,
            processData: false,
            success: function (data) {
                alert("Deposito agregado correctamente");
                $("#inlineFormInputGroup").val("0.0");
            },
            error: function (result) {
                alert("Woops, se produjo un error");
            }
        });
    }
</script>